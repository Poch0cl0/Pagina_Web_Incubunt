"use client";
import { useState, useRef } from "react";

export const DropDownQuestion = ({
  data,
}: {
  data: Array<{ question: string; answer: string }>;
}) => {
  const [openIndex, setOpenIndex] = useState<number | null>(null);
  const contentRefs = useRef<Array<HTMLDivElement | null>>([]);

  const toggle = (index: number) => {
    setOpenIndex(openIndex === index ? null : index);
  };

  return (
    <div className="w-full space-y-2 md:px-10">
      {data.map((item, index) => {
        const isOpen = openIndex === index;

        return (
          <div key={index} className="w-full">
            <button
              onClick={() => toggle(index)}
              className={`w-full flex justify-between items-center px-8 py-4 transition-all duration-300 ease-in-out cursor-pointer
                ${isOpen
                  ? "bg-white text-[#0063B5] font-extrabold rounded-t-2xl"
                  : "bg-[#25272C] text-white rounded-2xl"
                }`}
            >
              <span className="text-lg font-medium text-left flex-1">
                {item.question}
              </span>
              <span className="ml-4 text-lg shrink-0">
                {isOpen ?

                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="10" viewBox="0 0 16 10" fill="none">
                    <mask id="path-1-inside-1_2194_571" fill="white">
                      <path d="M0.373448 9.54044C-0.0170765 9.14992 -0.0170765 8.51675 0.373448 8.12623L7.29257 1.20711C7.68309 0.816582 8.31626 0.816583 8.70678 1.20711L15.6259 8.12623C16.0164 8.51675 16.0164 9.14992 15.6259 9.54044L15.5609 9.60539C15.1704 9.99592 14.5373 9.99592 14.1467 9.60539L8.70678 4.16544C8.31626 3.77491 7.68309 3.77492 7.29257 4.16544L1.85261 9.6054C1.46209 9.99592 0.828925 9.99592 0.438401 9.60539L0.373448 9.54044Z" />
                    </mask>
                    <path d="M0.373448 9.54044C-0.0170765 9.14992 -0.0170765 8.51675 0.373448 8.12623L7.29257 1.20711C7.68309 0.816582 8.31626 0.816583 8.70678 1.20711L15.6259 8.12623C16.0164 8.51675 16.0164 9.14992 15.6259 9.54044L15.5609 9.60539C15.1704 9.99592 14.5373 9.99592 14.1467 9.60539L8.70678 4.16544C8.31626 3.77491 7.68309 3.77492 7.29257 4.16544L1.85261 9.6054C1.46209 9.99592 0.828925 9.99592 0.438401 9.60539L0.373448 9.54044Z" fill="#0063B5" />
                    <path d="M0.438401 9.60539L3.97394 6.06986L0.438401 9.60539ZM8.70678 4.16544L5.17125 7.70097L8.70678 4.16544ZM7.29257 4.16544L3.75703 0.629907L7.29257 4.16544ZM15.5609 9.60539L12.0254 6.06986L15.5609 9.60539ZM14.1467 9.60539L10.6112 13.1409L14.1467 9.60539ZM15.6259 8.12623L19.1614 4.59069L15.6259 8.12623ZM15.6259 9.54044L12.0904 6.00491L15.6259 9.54044ZM7.29257 1.20711L10.8281 4.74264L7.29257 1.20711ZM8.70678 1.20711L5.17125 4.74264L8.70678 1.20711ZM0.373448 8.12623L-3.16209 4.59069L0.373448 8.12623ZM0.373448 9.54044L3.90898 6.00491L0.373448 9.54044ZM0.373448 8.12623L3.90898 11.6618L10.8281 4.74264L7.29257 1.20711L3.75704 -2.32843L-3.16209 4.59069L0.373448 8.12623ZM8.70678 1.20711L5.17125 4.74264L12.0904 11.6618L15.6259 8.12623L19.1614 4.59069L12.2423 -2.32843L8.70678 1.20711ZM15.6259 9.54044L12.0904 6.00491L12.0254 6.06986L15.5609 9.60539L19.0965 13.1409L19.1614 13.076L15.6259 9.54044ZM14.1467 9.60539L17.6823 6.06986L12.2423 0.629906L8.70678 4.16544L5.17125 7.70097L10.6112 13.1409L14.1467 9.60539ZM7.29257 4.16544L3.75703 0.629907L-1.68292 6.06986L1.85261 9.6054L5.38815 13.1409L10.8281 7.70097L7.29257 4.16544ZM0.438401 9.60539L3.97394 6.06986L3.90898 6.00491L0.373448 9.54044L-3.16209 13.076L-3.09713 13.1409L0.438401 9.60539ZM1.85261 9.6054L-1.68292 6.06986C-0.120815 4.50776 2.41185 4.50777 3.97394 6.06986L0.438401 9.60539L-3.09713 13.1409C-0.753996 15.4841 3.04499 15.4841 5.38815 13.1409L1.85261 9.6054ZM8.70678 4.16544L12.2423 0.629906C9.89916 -1.71325 6.10017 -1.71323 3.75703 0.629907L7.29257 4.16544L10.8281 7.70097C9.26601 9.26307 6.73335 9.26308 5.17125 7.70097L8.70678 4.16544ZM15.5609 9.60539L12.0254 6.06986C13.5875 4.50776 16.1202 4.50776 17.6823 6.06986L14.1467 9.60539L10.6112 13.1409C12.9543 15.4841 16.7533 15.4841 19.0965 13.1409L15.5609 9.60539ZM15.6259 8.12623L12.0904 11.6618C10.5283 10.0997 10.5283 7.567 12.0904 6.00491L15.6259 9.54044L19.1614 13.076C21.5046 10.7328 21.5046 6.93384 19.1614 4.59069L15.6259 8.12623ZM7.29257 1.20711L10.8281 4.74264C9.266 6.30474 6.73334 6.30473 5.17125 4.74264L8.70678 1.20711L12.2423 -2.32843C9.89918 -4.67157 6.10019 -4.67158 3.75704 -2.32843L7.29257 1.20711ZM0.373448 8.12623L-3.16209 4.59069C-5.50523 6.93384 -5.50523 10.7328 -3.16209 13.076L0.373448 9.54044L3.90898 6.00491C5.47108 7.567 5.47108 10.0997 3.90898 11.6618L0.373448 8.12623Z" fill="#0063B5" mask="url(#path-1-inside-1_2194_571)" />
                  </svg> :

                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="10" viewBox="0 0 16 10" fill="none">
                    <mask id="path-1-inside-1_2194_576" fill="white">
                      <path d="M15.6266 0.95956C16.0171 1.35008 16.0171 1.98325 15.6266 2.37377L8.70743 9.29289C8.31691 9.68342 7.68374 9.68342 7.29322 9.29289L0.374098 2.37377C-0.0164263 1.98325 -0.0164255 1.35008 0.374099 0.95956L0.439052 0.894607C0.829576 0.504083 1.46274 0.504083 1.85327 0.894607L7.29322 6.33456C7.68374 6.72509 8.31691 6.72508 8.70743 6.33456L14.1474 0.894606C14.5379 0.504081 15.1711 0.504083 15.5616 0.894607L15.6266 0.95956Z" />
                    </mask>
                    <path d="M15.6266 0.95956C16.0171 1.35008 16.0171 1.98325 15.6266 2.37377L8.70743 9.29289C8.31691 9.68342 7.68374 9.68342 7.29322 9.29289L0.374098 2.37377C-0.0164263 1.98325 -0.0164255 1.35008 0.374099 0.95956L0.439052 0.894607C0.829576 0.504083 1.46274 0.504083 1.85327 0.894607L7.29322 6.33456C7.68374 6.72509 8.31691 6.72508 8.70743 6.33456L14.1474 0.894606C14.5379 0.504081 15.1711 0.504083 15.5616 0.894607L15.6266 0.95956Z" fill="#1C1B1F" />
                    <path d="M14.1474 0.894606L17.6829 4.43014L14.1474 0.894606ZM15.5616 0.894607L19.0971 -2.64093L15.5616 0.894607ZM7.29322 6.33456L3.75769 9.87009L7.29322 6.33456ZM0.439052 0.894607L3.97459 4.43014L0.439052 0.894607ZM0.374099 0.95956L3.90963 4.49509L0.374099 0.95956ZM15.6266 2.37377L12.091 -1.16176L15.6266 2.37377ZM15.6266 0.95956L19.1621 -2.57597L15.6266 0.95956ZM15.6266 2.37377L12.091 -1.16176L5.1719 5.75736L8.70743 9.29289L12.243 12.8284L19.1621 5.90931L15.6266 2.37377ZM7.29322 9.29289L10.8288 5.75736L3.90963 -1.16176L0.374098 2.37377L-3.16144 5.90931L3.75768 12.8284L7.29322 9.29289ZM0.374099 0.95956L3.90963 4.49509L3.97459 4.43014L0.439052 0.894607L-3.09648 -2.64093L-3.16144 -2.57597L0.374099 0.95956ZM1.85327 0.894607L-1.68227 4.43014L3.75769 9.87009L7.29322 6.33456L10.8288 2.79903L5.3888 -2.64093L1.85327 0.894607ZM8.70743 6.33456L12.243 9.87009L17.6829 4.43014L14.1474 0.894606L10.6119 -2.64093L5.1719 2.79903L8.70743 6.33456ZM15.5616 0.894607L12.0261 4.43014L12.091 4.49509L15.6266 0.95956L19.1621 -2.57597L19.0971 -2.64093L15.5616 0.894607ZM14.1474 0.894606L17.6829 4.43014C16.1208 5.99224 13.5882 5.99223 12.0261 4.43014L15.5616 0.894607L19.0971 -2.64093C16.754 -4.98407 12.955 -4.98408 10.6119 -2.64093L14.1474 0.894606ZM7.29322 6.33456L3.75769 9.87009C6.10084 12.2132 9.89983 12.2132 12.243 9.87009L8.70743 6.33456L5.1719 2.79903C6.73399 1.23694 9.26665 1.23692 10.8288 2.79903L7.29322 6.33456ZM0.439052 0.894607L3.97459 4.43014C2.41249 5.99224 -0.120171 5.99224 -1.68227 4.43014L1.85327 0.894607L5.3888 -2.64093C3.04565 -4.98407 -0.753336 -4.98407 -3.09648 -2.64093L0.439052 0.894607ZM0.374098 2.37377L3.90963 -1.16176C5.47173 0.400341 5.47172 2.933 3.90963 4.49509L0.374099 0.95956L-3.16144 -2.57597C-5.50458 -0.232833 -5.50459 3.56616 -3.16144 5.90931L0.374098 2.37377ZM8.70743 9.29289L5.1719 5.75736C6.734 4.19526 9.26666 4.19527 10.8288 5.75736L7.29322 9.29289L3.75768 12.8284C6.10082 15.1716 9.89981 15.1716 12.243 12.8284L8.70743 9.29289ZM15.6266 2.37377L19.1621 5.90931C21.5052 3.56616 21.5052 -0.232828 19.1621 -2.57597L15.6266 0.95956L12.091 4.49509C10.5289 2.933 10.5289 0.400337 12.091 -1.16176L15.6266 2.37377Z" fill="white" mask="url(#path-1-inside-1_2194_576)" />
                  </svg>}

              </span>
            </button>

            <div
              ref={(el) => { contentRefs.current[index] = el; }}
              className={`overflow-hidden transition-all duration-500 ease-in-out px-8 bg-white text-black rounded-b-2xl`}
              style={{
                maxHeight: isOpen
                  ? contentRefs.current[index]?.scrollHeight + "px"
                  : "0px",
                opacity: isOpen ? 1 : 0,
                transform: isOpen ? "translateY(0)" : "translateY(-5px)",
              }}
            >
              <div className="py-6">
                <p className="text-sm">{item.answer}</p>
              </div>
            </div>
          </div>
        );
      })}
    </div>
  );
};
